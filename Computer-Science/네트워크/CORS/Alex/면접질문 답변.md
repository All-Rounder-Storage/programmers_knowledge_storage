# CORS 가 default 로 허용되어 있을 때의 어떤 문제점이 있나요?
```markdown
질문 자체가 약간 애매하긴 하네요
CORS가 없을 때를 가정한 질문이라면 CORS가 없을경우에는 SOP 보안정책에 의해 다른 사이트간의 자원 공유를 전혀 할수가 없게 됩니다
시대가 많이 발전하면서 최근에는 하나의 애플리케이션에서도 다양한 많은 다른 서비스와 연동을 하여 사용자들에게 더욱 편리한 서비스를 제공합니다
하지만 CORS가 없어 다른 출처간의 리소스 공유가 하나도 되지 않는다면 이런 서비스는 모두 정상적으로 사용자들에게 제공 할 수 없게 됩니다

CORS가 모든 요청을 허용하는 경우를 가정하는 질문이라면, 즉 SOP 보안정책이 사라진다면
결국에는 서로 다른 출처를 가진 사이트들끼리 자유롭게 자원을 공유한다는 얘기인데요
이 또한 문제가 큽니다
이 말은 즉슨 두 애플리케이션간의 정보를 아무 제약없이 다 공유가 가능하다는 건데요
우리가 사용하는 웹 클라이언트는 생각보다 보안에 많이 취약한 친구입니다
개발자 도구만 켜도 수많은 정보들이 적나라하게 표출되는 것이지요
SOP가 없다면 이런 정보들을 이용하여 해커들이 사용자 정보를 빼내는 악성코드를 심어도 그대로 해커들한테도 정보가 공유된다는 뜻이겠지요
그래서 SOP 즉 동일한 출처끼리만 리소스 공유를 할 수 있다는 규칙을 default로 함으로써 해커의 공격을 부분적으로 방어하며 보안을 높이는 효과가 있습니다
```

# CORS 가 문제된 상황에 대해 설명해주세요
```markdown
pdf.js 라는 라이브러리를 통해 PDF 렌더링 기능을 개발하고 있는 중이였습니다
사용자 대시보드 모듈(WMS) 서버에서 Contents 서버에 있는 pdf 파일을 읽어와 렌더링해주는 기능인데요
이때 CORS 문제가 발생하였습니다

pdf.js 라이브러리 내부를 까보니 iframe을 통해 Admin 서버 -> Contents 서버에 리소스를 요청하고
데이터를 반환하는 과정에서 CORS Error가 발생하는 것을 확인하였습니다

이때 Admin 서버와 Contents 서버는 동일한 프로토콜과 호스트를 사용했지만 포트가 서로 달랐습니다
즉 출처가 다르기 때문에 브라우저에서는 CORS 오류를 낸 것입니다

```

# CORS 발생 시 해결책은 무엇인가요?
```markdown
CORS의 해결책은 크게 두가지가 있습니다
첫번째로는 정석적인 방법으로 서버에서 직접 allow-origin 등의 CORS 관련 설정을 해주는 것입니다
하지만 콘텐츠 서버는 spring같은 모듈이 올라간 것이 아닌 그냥 폴더, 파일 저장소이기 때문에 해당 설정을 해주기가 어려웠습니다

두번째로는 프론트 프록시 서버를 이용하여 프록시 서버와 백엔드 간의 출처를 조율해주는 겁니다
이럴 경우 브라우저와 프록시 서버간의 출처는 동일하기 때문에 CORS Error가 발생하지 않습니다
하지만 위와 마찬가지로 CORS를 해결하기 위해 콘텐츠 서버를 위한 프록시 서버를 구축하는 것은 바람직하지 않다고 생각합니다

따라서 제가 해결한 방법은 심플하게 양쪽의 출처를 맞춰주는 방법을 선택하였습니다
따라서 서버 내 콘텐츠 서버의 포트를 사용자 대시보드 모듈 포트와 맞춰주어 양쪽의 출처를 동일하게 맞춰주었습니다
```