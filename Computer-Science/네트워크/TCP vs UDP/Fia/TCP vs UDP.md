# TCP vs UDP

## 이게 뭔가요 ?
- OSI 7 layer 중 Transportation 계층 에서 사용되는 프로토콜
    - ※ 전송 계층은 전달되는 패킷의 오류 검사 / 재전송 요청 / 차단 등의 제어를 담당한다.
    
`TCP (Transmission Control Protocol)`

- 신뢰성을 보장하는 **연결형 서비스**
    - 연결이 설정되면 데이터가 양뱡향으로 전송될 수 있는 서비스(연결 지향적)
  
- 네트워크에 연결된 컴퓨터 들이 실행되는 프로그램 간에 데이터 교환을 아래의 특징을 갖춰 할 수 있도록 한다.
    - **안정적으로**
    - **순서를 보장하며**
    - **에러 없이**

`특징`

#### 연결형 서비스
- 가상 회선 방식을 제공
- 3-way handshaking 을 통해 연결 설정 / 4-way handshaking 을 통해 연결 해제

#### 흐름 제어(flow control)
- 데이터 처리의 속도를 조절해 받는 쪽의 버퍼 오버플로우를 방지
    - 송신자가 너무 많은 데이터를 빠르게 보내 수신자가 감당이 불가한 상황을 방지한다.
    - 수신자가 window size 를 통해 수신량을 설정할 수 있다.
    
#### 혼잡 제어(Congestion control)
- 네트워크 내의 패킷의 수가 넘치지 않도록 방지
    - 정보의 소통량이 과할 경우, 패킷을 조금만 전송하도록 조정하며 제어한다

#### 신뢰성이 높은 전송(Reliable transmission)
- Dupack-based retransmission
    - ACK 값이 중복으로 올 경우 패킷 이상을 감지, 재전송 요청
    
- Timeout-based retransmission
    - 일정 시간 동안 ACK 값 을 수신하지 못할 경우 재전송 요청
    
#### 전이중 / 점대점 방식
- 전이중(Full-Duplex) : 양뱡향으로 동시 전송 가능

- 점대점(Point to Point) : 각 연결이 정확히 2개의 종단점 가짐

#### 단점
- 네트워크에서 대역폭을 더 많이 사용

#### 사용되는 곳
- HTTPS, HTTP, SMTP, POP, FTP
    - 이미지, 파일 전송
    - 웹페이지 같은 정보 전송
    - 이메일 보내기
- etc...

`UDP (User Datagram Protocol)`

- 오류 검사 및 복구 서비스가 필요하지 않은 **비 연결형 서비스**
    - 연결을 열고 / 유지하고 / 종료 할 필요가 없는 프로토콜

`특징`

#### 비연결형 서비스
- 데이터 그램 방식 이용

- TCP 와 다르게 연결 없이 통신이 가능
    - handshake 과정이 없음

#### 데이터의 재전송 없음
- 데이터 누락 시에도 복구 나 재전송 요청 등이 진행 되지 않음

#### 많은 데이터의 전송
- 연결 기반이 아님으로 데이터의 제대로된 도착을 상호 간에 확인하지 않기 때문에 많은 패킷을 전송할 수 있음

#### 고정된 순서 없음
- 모든 패킷이 서로 독립적이기 때문에 고정된 순서로 전송 되지 않음

#### 가벼움
- 데이터 재전송, 순서 보장, 안전성 보장 등의 기능을 지원하지 않아서 가벼움

#### 오류 검사
- 오류 검사를 하지만 잘못된 패킷일 경우 버림(재전송 요청 하지 않음)

#### 단점
- 데이터의 신뢰성이 보장되지 않습니다.
    - 패킷의 분실 확인 불가
    - 패킷의 전달 순서 보장 불가
#### 사용되는 곳
- 화상회의
- 스트리밍
- VoIP
- DNS
- etc ..

### TCP vs UDP
![tcp vs udp](https://user-images.githubusercontent.com/49216939/183083679-d4f1384f-3e47-46d4-b2fa-a602ba81eb09.png)

#### 공통점
- 포트 번호를 이용하여 주소 지정
- 데이터 오류 검사를 위한 header 에 CheckSum 필드 존재

#### 차이점
※ 왼쪽이 TCP / 오른쪽이 UDP

- 연결 방식
    - 연결형 / 비연결형

- 통신 방식
    - 1 : 1 / 1 : 1, 1 : N, N : N

- 패킷 교환 방식
    - 가상 회선 / 데이터 그램

- 전송 순서 보장
    - 보장 / 보장 안함

- 수신 여부 체크
    - 수신 여부 확인 / 수신 여부 미확인
  
- 신뢰성 및 속도
    - 높음, 느림 / 낮음, 빠름

#### 가상 회선 방식 과 데이터 그램 방식의 차이점
※ 왼쪽이 TCP / 오른쪽이 UDP

- 패킷 간의 논리적 통신 경로가 존재(순서 있음) / 패킷 끼리 독립적인 취급(순서 없음)
  
- 데이터 재전송, 오류 검증 및 복구 절차 존재 / 데이터 재전송 없음, 오류는 검증만 하고 발생시 폐기

- 송수신 측이 수신 결과에 대해 알고 있음 / 송신 측은 수신 결과에 대해 알지 않음

- 응용 계층에게 전달 받은 데이터에 추가하는 헤더 정보 가 상이
```markdown
TCP header
- 송신자의 포트 번호(데이터를 보내는 애플리케이션의 포트 번호)
- 수신자의 포트 번호(데이터를 받을 애플리케이션의 포트 번호)
- 순서 번호(송신자가 지정하는 순서 번호(바이트 수 기준))
- 응답 번호(수신 완료된 데이터 순서 번호(바이트 수 기준))
- 데이터 오프셋(데이터의 시작 위치)
- 예약 필드(사용하지 않음)
- 제어 비트(SYN, ACK, FIN 등의 제어 번호)
- 윈도우 크기(수신자에서 수신할 수 있는 데이터의 크기)
- 체크섬(데이터 오류 검사에 사용)
- 긴급 위치(긴급하게 처리할 데이터의 위치)
```

```markdown
UDP header
- 송신자의 포트 번호(데이터를 보내는 애플리케이션의 포트 번호)
- 수신자의 포트 번호(데이터를 받을 애플리케이션의 포트 번호)
- 데이터의 길이(UDP 헤더와 데이터의 총 길이)
- 체크섬(데이터 오류 검사에 사용)
```

### reference
- [reference](https://velog.io/@hidaehyunlee/TCP-%EC%99%80-UDP-%EC%9D%98-%EC%B0%A8%EC%9D%B4)
- [reference](https://madplay.github.io/post/network-tcp-udp-tcpip)
