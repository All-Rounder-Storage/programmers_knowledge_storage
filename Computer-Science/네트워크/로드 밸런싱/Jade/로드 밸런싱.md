# 로드 밸런싱

## 로드 밸런싱이란?

- 로드밸런싱은 여러 대의 서버를 두고 서비스를 제공하게 될 때 부하 분산을 위하여 사용하게 되는 기술이다.
- 로드밸런싱은 `클라이언트`와 여러 대의 서버로 이루어진 `서버 그룹` 사이에 위치한 `로드 밸런서` 에 의해 이루어진다.

  [loadBalancer]

- 클라이언트에서 많은 요청이 들어왔을 때 한대의 서버에게만 부하가 가해지지 않도록 트래픽을 관리해 서버가 최적의 퍼포먼스를 낼 수 있게 해준다.
  
<br />

## 로드 밸런싱은 언제 필요할까?


- 로드 밸런싱에 대해 더 얘기해보기전에 로드 밸런싱이 나오게 된 배경에 대해 생각해보면 이해가 더 쉬울 것이다.

<br />

`자, 인터넷상에 어떤 서비스를 하나 운영하고 있다고 가정해보자`

- 분명 서비스 제공 초기 단계에서는 사용자들의 수가 적을 것이고, 사용자 수가 적기 때문에 클라이언트에서 서버로 보내는 요청의 수도 적을 것이다.

<br />

#### 하지만 서비스가 대박이 나게됐고 대박 소문을 듣고 서비스를 찾는 사용자 수가 커지게 된다면?

```
이때 해결책으로 나오게 되는 방법이 바로 **Scale-up**과 **Scale-out** 이라는 개념이다.
```

- 아마 기존 서버 하나로는 요청에 대한 모든 응대가 불가능 할것이다.
- `이때 가장 먼저 생각하게 되는 방법은 서버 한개의 성능을 확장 하는 것이다.`
    - 이것이 바로 **Scale-up 이다.**
    - CPU의 성능을 높이는 것을 이에 대한 예시로 들 수 있다.

  [scale-up]

  [이미지 출처](https://blog.router-switch.com/2021/03/what-is-the-difference-between-scale-up-and-scale-out/)

<br />

#### 하지만 서비스가 초대박이 나서 사용자가 기하급수적으로 더더더 늘어나게 된다면???

- 아마 하나의 서버에 성능을 확장하는데 있어서는 분명 기술적인 한계가 존재할 것이다.
- 그렇담 그 다음으로 생각할 수 있는 방법은?
    - `하나만 사용하던 서버를 여러대의 서버로 늘리는 것이다.`
    - 이것이 바로 **Scale-out 이다.**

  [scale-out]

  [이미지 출처](https://blog.router-switch.com/2021/03/what-is-the-difference-between-scale-up-and-scale-out/)

<br />

#### 하지만 그냥 서버만 여러대를 늘리게 된다면 한계점이 존재한다.

- 예를들어, A 서버 한개만 있던것에 B, C 서버를 추가했다고 하자
    - 그런데 만약 A 서버에서 받은 요청이 다른 B, C 서버들 보다 훨씬 오래 걸리는 작업이라면?
        - A 서버는 B, C 서버보다 많은 양의 부하를 받게되고 프로세스가 느려지게 되며 이는 서버가 한개일 때와 상황이 똑같아 진다.
    - 만약에 B 서버가 갑자기 통신이 되지 않는 상황이라면?
        - 서버들 사이에는 무슨일을 하고 있는지 모르던 상황이기 때문에 통신이 되지 않는 B 서버가 하던 작업은 간과된다.
    - 만약에 A, B는 할줄 모르는 작업이지만 C 서버는 그 작업에 특화 돼있다면?

- 이러한 한계점을 극복하기 위해서는 A, B, C 서버들을 모니터하고 서버들 사이에 트래픽을 분배해주는 `로드 밸런서가 필요하고 로드 밸런싱이 필요한 것이다.`
- 로드 밸런서는 각각의 서버가 최적의 퍼포먼스를 내고 프로세스 처리를 빠르게 만들기 위해서 각 서버들의 상황을 고려하여 트래픽을 분배 해준다.
- 이러한 트래픽을 분배해주는 방법 (로드밸런싱 알고리즘)에도 여러가지가 존재한다.

<br />

### 로드 밸런싱 알고리즘

---

1. 라운드 로빈 **(Round Robin)**
2. 가중 라운드 로빈 **(Weighted Round Robin Method)**
3. 최소 연결 방식 **(Least Connection Method)**
4. 최소 리스폰타임 **(Least Response Time Method)**
5. 대역폭 방식 **(Bandwidth Method)**
6. IP 해시 방식 **(IP Hash Method)**