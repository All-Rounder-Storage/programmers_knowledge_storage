# HTTP 메서드

## HTTP 메서드가 무엇인가 ?
- 클라이언트와 서버 사이에 이루어지는 요청(Request)과 응답(Response) 데이터를 전송하는 방식 입니다.
- 요청 메서드를 정의하여, 주어진 리소스에 수행하길 원하는 행동을 나타낸다.

## 사용하는 이유는 무엇인가 ?
- 같은 경로의 request 에서 Method 에 따라 다른 동작을 하게 하기 위해 사용한다.
- 동일한 uri 에서도 메서드에 따라 여러 동작을 구현할 수 있다(가시성, 효율성 증가)
- 리소스와 행위를 분리 할 수 있다.

## HTTP 메서드는 무엇이 있는지 알아보자  

### GET
```markdown
- 특정 리소스에 대한 정보를 요청한다.
- **데이터의 수정 없이 데이터를 받아 오기만 한다**
- 서버에 전달하고 싶은 데이터는 query parameter 를 통해 전달 한다.
- body 에 값을 넣어 전달하는 방식은 보안의 문제로 권장하지 않는다.
    + 안드로이드의 공식적인 HTTP 통신 라이브러리에서는 업데이트를 통해
      GET 에 body 를 넣는 것을 라이브러리에서 지원하지 않는다.
- 응답이 오는 데이터의 포맷은 json, html 등이 존재한다.
```

### POST
```markdown
- 특정 리소스를 서버에 input 할 때 사용한다.
- **데이터의 변화가 발생하여 서버의 상태 변화나 부작용이 일어날 수 있다.**
- message body 를 통해서 서버로 데이터를 전달한다.
- 주로 로그인, 로그아웃, 토큰 등록, 게시물 등록 등 등록(저장)을 해야하는 작업에 쓰인다.
```

### PUT
```markdown
- 목적 리소스의 값을 **대체** 할 때 사용하며, **리소스가 존재하지 않을 경우 생성**합니다.
- 클라이언트 단에서 리소스를 식별하여 요청을 보내야 한다.
- 부분 변경이 이뤄지지 않으며 **대체** 됨을 주의해야 한다.
    + 기존 데이터
      {
        name : "hanaLee",
        nickName : "fia"
      }
    + @PUT 요청 
      { 
        name : "leeHana"
      }
    + 결과
      {
        name : "leeHana"
      }
```

### PATCH
```markdown
- 목적 리소스의 **특정 부분을 변경** 합니다.
- PUT 을 이용해서 모든걸 변경할 필요가 없을 경우에는 PATCH 를 이용할 수 있습니다.
```

### DELETE
```markdown
- 특정 리소스를 삭제할 때 사용한다.
```

### HEAD
```markdown
- GET 과 동일하지만, **메세지 부분은 제외** 하고 상태 줄과 헤더만 반환 한다.
```

### OPTIONS
```markdown
- 대상 리소스의 통신 가능 메서드를 설명한다.
- **주로 CORS(Cross-Origin Resource Sharing) 에서 사용한다. **(CORS : cross-origin 요청을 안전하게 수행할 수 있도록 하는 메커니즘)**
```

### CONNECT
```markdown
- 대상 리소스로 식별되는 서버에 대한 터널을 설정 한다.
- 웹서버에 proxy 기능을 요청할 때 사용된다.
```

### TRACE
```markdown
- 대상 리소스에 대한 경로에 따라 메세지 루프백 테스트를 수행한다.
- 원격지 서버에서 loopback 메세지를 호출 하기 위해 사용 된다.
```

## HTTP 메서드의 속성

- **안전(Safe Methods)**
    + 호출을 통해서 리소스가 변경 되지 않는다.
    + GET, HEAD 가 해당이 된다.
  
- **멱등(Idempotent Methods)**
    + 메서드를 여러번 호출하더라도 결과가 동일해야 한다.
    + 외부 요인으로 인해 리소스가 변경되는 것은 고려하지 않는다. 내가 호출하는 것에 한정되어 판단된다.
    + GET : 몇 번을 조회하더라도 같은 결과 조회 된다.
    + PUT : 결과를 대체 하기에 같은 요청을 여러번 해도 최종 결과는 동일하다.
    + DELETE : 결과를 삭제, 같은 요청을 여러번 해도 삭제된 결과는 동일하다.
    + 활용 되는 기술 : 자동 복구 기능, 소켓 통신 중 접속 실패 시 재시도, webRTC 영상 송수신이 필요할 때 데이터가 제대로 오지 않을 때 재시도 등

- **캐시가능(Cacheable Methods)**
    + 응답 결과 리소스를 캐시해서 사용할 수 있다.
    + GET, HEAD, POST, PATCH 는 캐시가 가능하다.
    + POST, PATCH 는 본문 내용 까지 캐시 key 로 고려한 구현이 필요하다.

![http 속성](https://user-images.githubusercontent.com/49216939/175032768-42a19802-1037-4a69-a41b-57db28d47be4.png)


## HTTP 의 상태 코드

### 1xx
- Informational
- 요청이 수신되어 처리 중 임을 알린다.

### 2xx
- Successful
- 요청이 정상 처리 되었음을 알린다.

### 3xx
- Redirection
- 요청을 완료하기 위해선 추가적인 조치가 필요하다
- 영구 리다이렉션(301, 308) : 특정 리소스의 uri 가 영구적으로 이동, 원래의 url 사용 하지 않음
- 일시 리다이렉션(302, 307, 303) : 일시적인 변경, 검색 엔진 등에서 url 변경 X
- 특수 리다이렉션 : 결과 대신 캐시를 이용

### 4xx
- Client Error
- 잘못된 데이터, 문법 등으로 서버가 요청 수행이 불가 함을 알린다.
- 해당 리소스에 대한 인증이 필요한 경우 (401), 요청은 이해 했지만 승인을 거부하는 경우(403), 요청한 리소스를 찾을 수 없을 경우(404)

### 5xx
- Server Error
- 서버의 오류를 나타내며, 서버가 정상 요청을 처리하지 못했음 뜻 한다.
