# OSI 7 계층

```
OSI 7계층, OSI 모형 혹은 OSI 모델이라고도 불리는 OSI 7계층은 다양한 통신 시스템이 표준 프로토콜(서로 다른 기종의 컴퓨터끼리 통신하기 위하여 지켜야 하는 규칙)을
사용하여 통신할 수 있도록 국제 표준화 기구(ISO)가 정해준 표준 규격이다.

❗️ OSI 7계층이 존재하기 전에는 표준 모델이 없었기 때문에 서로 다른 회사에서 만든 장치끼리는 통신이 되지 않는 일이 있었다고 한다.
```

- OSI 7계층이 생겨나면서 네트워크 통신 과정을 단계별로 파악할 수 있게 됐다.
- 또한 네트워크 통신이 어떻게 진행되는지 그 흐름을 한눈에 알아보고 파악하기 쉬워졌다.

<br />

| Group | 계층 | 이름 (프로토콜 데이터 단위, Protocol Data Unit) | 설명 |
| --- | --- | --- | --- |
| 상위층 | 7 | 응용, Application(Message 혹은 Data) | 데이터를 전송하고 받을 수 있는 유저 인터페이스를 제공한다. |
|  | 6 | 표현, Presentation(Message 혹은 Data) | 전송을 위해 데이터를 변환하고, 포맷하며 압축한다. |
|  | 5 | 세션, Session(Message 혹은 Data) | 원격 시스템과의 세션을 시작하고 종료한다. |
| 하위층 | 4 | 전송, Transport(Segment) | 데이터 스트림을 더 작은 세그먼트로 나누고 데이터 전송이 보장되거나(TCP) 보장되지 않는(UDP) 데이터 전달을 제공한다. |
|  | 3 | 네트워크, Network(Packet 혹은 UDP의 Datagram) | 다른 네트워크와 통신하기 위한 경로 설정 및 논리 주소를 결정 |
|  | 2 | 데이터 링크, Data Link(Frame) | 네트워크 기기 간의 데이터 전송 및 물리 주소를 결정 |
|  | 1 | 물리, Physical(bit) | 시스템 간의 물리적인 연결과 전기 신호를 변환 및 제어 |

<br />

<aside>
  💡 OSI의 각 층을 알아보기 전에 알고 있으면 좋을 용어 및 설명입니다!   

  - 상위 계층과 하위 계층 사이에서 주고 받는 것을 **SDU : Service Data Unit** 라고 한다.
  - 같은 계층에서 주고받는 것을 **PDU : Protocol Data Unit** 라고 한다.

  - 신호를 나타내는 최소 단위는 **비트(bit)** 라고 한다.
  - 정보의 기본단위는 **바이트(Byte)** 라고 한다. 8비트 === 1 바이트

  - 가까운 거리에 위치한 장치들을 서로 연결한 네트워크를 **랜(Local Area Network, LAN, 근거리 통신망)** 이라고 한다.
  - 랜을 하나로 묶는 거대한 네트워크를 **왠(Wide Area Network, WAN, 원거리 통신망)** 이라고 한다.

</aside>

<br />

## OSI 7계층과 TCP/IP 4계층 혹은 5계층

`OSI 모델이 실무적으로 이용하기에 복잡한 탓에 실제 인터넷에서는 이를 단순화한 TCP/IP 모델이 사용된다.`

<br />

#### **업데이트된 TCP/IP 모델**

![osiAndTcp](https://user-images.githubusercontent.com/61952198/184868522-cad075bd-c99a-4285-9237-a2be4b834bd8.png)


- 기존 TCP/IP 모델은 4계층으로 이루어져 TCP/IP 4계층으로 많이 불렸으나 업데이트된 TCP/IP는 Link layer 을 OSI 7계층과 동일하게 나누어 `5계층`이 되었다.
- Internet layer의 이름 또한 Network layer로 변경되었다.

<br />

#### **계층 모델의 특징**

- 계층은 계층 간 상하 구조를 가진다.
  - 상위 계층은 하위 계층의 기능을 이용하고, 하위 계층은 상위 계층에게 기능을 제공한다.
  - 일반적으로 상위 계층의 프로토콜은 소프트웨어로, 하위 계층의 프로토콜은 하드웨어로 구현된다.
- 계층은 각각 독립성을 띠고 있다.
  - **즉, 특정 계층에 이상이 생기면 다른 단계의 장비 및 소프트웨어를 건들이지 않고도 이상이 생긴 단계만 고치면 된다.**
- 사용자가 **데이터를 전송**할 경우 이동경로는 아래와 같다는 것을 염두해 두고 앞으로 나올 계층들을 살펴보면 좋을 것 같다.
  - **`(응용계층 → 물리계층) ▶ 전송 매체(데이터가 흐르는 물리적인 선로) ▶ (물리계층 → 응용계층)`**

<br />

#### ****Encapsulation (캡슐화) & Decapsulation (역캡슐화)****

- 사용자가 데이터를 전송할 때 데이터는 `응용 계층(최상위 계층)` 에서 생성되고 한 계층씩 내려오게 된다. (7계층 **▶** 6계층 **▶** 5계층 …)
- 각각의 계층을 내려갈 때마다 **데이터 앞에 계층 정보(기능과 관련된 정보)를 포함하는 헤더(head)** 를 붙인다. 이러한 헤더를 붙이는 과정을 ****`Encapsulation (캡슐화)`**** 라고 한다.
  - 데이터 링크 계층에서는 테일(트레일러)도 붙는다.

```
이렇게 최상위 계층인 응용계층에서 각 계층에서 캡슐화 과정을 거쳐 물리계층으로 내려온 데이터는 
물리 계층에서 0과 1로 이루어진 비트열로 변환 후 전기신호로 변환하여 전송 매체(케이블 등)를 통해 다른 곳으로 전송된다.
```

- 이렇게 전송된 데이터는 수신하는 쪽에서 `물리계층`부터 응용 계층까지 순차적으로 올리게 된다.
- 각각의 계층을 올라갈 때마다 **붙어있던 header와 테일에 담긴 정보를 확인하고 난 뒤 제거**하면서 데이터를 읽게 된다. 이러한 과정을 ****`Decapsulation (역캡슐화)`**** 라고 한다.

![capsulation](https://user-images.githubusercontent.com/61952198/184868557-6369653b-3ad9-4ad9-93eb-4aa14cdd4da6.png)


<br />

## OSI 모델의 각 계층

### 1. ****물리 계층(Physical Layer)****

```
전송하고자 하는 데이터를 0과 1인 비트열에서 아날로그 신호로 바꾸어 상대 컴퓨터에 전송하고 아날로그 신호를 0, 1의 디지털 신호로 해석한다.
```

- 물리 계층은 단순히 데이터 전달의 역할만을 수행하도록 설계되었다.
  - 별다른 알고리즘이나 오류 제어 기능이 없다.

<br />

#### 전기신호?

- `디지털 신호 (0과 1)와 아날로그 신호`를 아울러 전기 신호라고 한다.

  ![analog_digital](https://user-images.githubusercontent.com/61952198/184868588-460cd221-52b9-4f03-8879-b170042a6837.png)


- 컴퓨터 네트워크를 통해 데이터를 송, 수신할 수 있도록 메인보드에 꼽혀있는 `랜(LAN) 카드를 통해` 디지털 신호는 아날로그 신호로 변환된다.
- 컴퓨터는 **전기가 흐른다(1)**, **흐르지 않는다(0)** 는 디지털 신호로 데이터를 정의한다
- 이러한 비트열로 이루어진 데이터를 전송 매체 (케이블 등)를 이용하여 상대 컴퓨터에 전송하려면 `디지털 신호에서 아날로그 신호로 변환`해야한다.
- 아날로그 신호를 받은 상대 컴퓨터는 다시 0과 1의 나열로 변환해야한다.
  - **`01011111 ▶ 아날로그 신호 ▶ 01011111`**
- 데이터 송신 컴퓨터와 수신 컴퓨터 사이에 전기 신호를 전송하기 위해서는 전선 케이블이 있어야 하는데 이때 `리피터` 라는 장비가 사용된다.

<br />

#### 리피터(repeater)

- `01011111 ▶ 약해진 전기신호 ▶ 리피터 ▶ 증폭된 전기신호 ▶ 01011111`
- 데이터를 송신하는 컴퓨터와 수신하는 컴퓨터가 멀리 있다면 신호는 갈수록 약해진다.
- 리피터는 약해진 신호를 증폭시켜주는 역할을 한다.
- 리피터를 이용하면 `1대 1 통신` 이 가능하다.
- 하지만 요즘에는 다른 네트워크 장비에서 리피터의 역할 (신호 증폭)까지 맡는 경우가 많아 잘 사용하지는 않는다.

  ![리피터](https://user-images.githubusercontent.com/61952198/184868618-e68705e4-f430-4c00-95a5-ef09eac6c107.png)


<br />

#### 허브(hub)

- 리피터는 1대 1 통신이 가능했지만 허브는 `여러대의 컴퓨터 통신`이 가능하게 해주며 `리피터 허브`라고도 불린다.
- 허브는 리피터처럼 신호를 증폭시키는 기능도 가지고 있기 때문에 허브를 사용하면 리피터는 따로 필요 하지 않다.
- 하지만 허브는 특정 컴퓨터에만 데이터를 전송하고 싶어도 **허브에 연결된 모든 컴퓨터에 데이터를 전달(`플러딩`)** 하게 되고 여러 컴퓨터가 동시에 데이터를 보내게되면 **데이터들끼리 서로 충돌이 발생할 수 있다**는 단점이 있다.
  - 원하는 컴퓨터에만 신호를 보내는 것이 아니라 허브에 연결된 모든 포트에에 신호를 보내기 때문에 **더미 허브(dummy hub)** 라는 이름으로 불리기도 한다.

    ![허브](https://user-images.githubusercontent.com/61952198/184868658-0cd4b5a2-652d-41d0-bbac-137513f115ac.png)




```
이러한 더미 허브의 단점을 보완해서 만든 것이 다음 계층인 데이터링크 계층에서 설명할 스위치이다.
```

<br />

### 2. 데이터링크 계층(****DataLink Layer****)

```
시스템간 오류 없는 데이터 전송을 위하여 물리적 주소(MAC 주소)를 이용해 데이터를 전송한다.
```

- 물리 계층에서 언급했던 허브를 사용하게 되면 **1. 관계 없는 장비들에게도 데이터를 보내게되고(플러딩)** 컴퓨터 여러 대가 동시에 데이터를 보내면 **2. 데이터들이 서로 부딪히는 충돌이 발생**할 수 있다는 문제점이 있었다.

  ![collison](https://user-images.githubusercontent.com/61952198/184868684-4d4ccf68-ef9b-46f8-b5d6-69b766b76256.png)


- 이러한 문제를 해결하기 위해 **랜(Local Area Network)에서 데이터를 정상적으로 주고받기 위해 적용하는 규칙인** `이더넷(Ethernet)` 이 등장하였다. (허브와 같은 장비에 연결된 컴퓨터와 데이터를 주고받을 때 사용된다.)
  1. **관계 없는 장비들에게도 데이터를 보내는** 문제를 해결하기 위해 기기들마다 고유한 MAC 주소 (목적지 정보)를 가지고 상호간 데이터를 주고받는다.
      - 목적지 이외의 장비들은 데이터를 받아도 무시하게 된다.
  2. **데이터들이 서로 부딪히는 충돌을 해결**하기 위해 다른 장치에서 데이터가 전송중이라면 충돌을 피하기 위해 데이터를 보내는 시점을 늦추게 된다.
      - 이더넷은 시점을 늦추는 방법으로 **CSMA/CD(Carrier Sense Multiple Access with Collision Detection)** 을 이용한다.

<br />

#### CSMA/CD

- 케이블에 신호가 흐른다면 신호를 보내려고 하는 컴퓨터를 잠시 대기시켜서 충돌을 피하는 방식이다.
- 하지만 `스위치`라는 장비가 생기면서 현재는 거의 사용하지 않게 되었다.

```
CS: 케이블에 신호가 흐르고 있는지 아닌지를 확인하는 규칙
MA: 케이블에 데이터가 흐르지 않고 있다면 데이터를 보내도 좋다라는 규칙
CD: 충돌이 발생하고 있는지를 확인하는 규칙
```

![csma:cd](https://user-images.githubusercontent.com/61952198/184868706-21f71366-fa9f-4737-b830-c14c946fe23e.png)


<br />

#### MAC 주소

- 물리 계층에서 디지털 신호를 아날로그 신호로 바꿔주는 랜카드는 `MAC 주소라는 물리적인 주소`를 가지고 있다.
  - 제조할 때 새겨져서 물리 주소라고도 불린다고 한다.
- MAC 주소가 다르면 서로 다른 랜카드임을 의미하며 같은 MAC 주소를 가진 랜카드는 없다.

<br />

#### MAC 주소를 활용한 통신

- 앞에서 OSI 7계층에서는 각각의 계층에서 헤더를 붙이는 캡슐화 과정이 있다고 했다.
- 데이터 링크 계층에서는 `이더넷 헤더` 와 `트레일러` 를 붙이게 된다.
- 그리고 이더넷 헤더와 트레일러가 추가된 데이터를 `프레임(Frame)` 이라고 한다.

  ![Frame](https://user-images.githubusercontent.com/61952198/184868726-ecef3370-04a5-4e83-a859-97f85686c43e.png)


- **이더넷 헤더**는 `목적지의 MAC 주소(6 바이트) + 출발지 MAC 주소 (6 바이트) + 유형 (2 바이트)` 로 이루어져 있다.
  - 유형은 이더넷으로 전송되는 상위 계층 프로토콜의 종류를 나타낸다.
- **트레일러(FCS(Frame Check Sequence))** 는 데이터 전송 도중 오류가 발생하는지 확인하는 역할을 한다.

```
즉! 
- 데이터 링크 계층에서 데이터에 이더넷 헤더와 트레일러를 붙여서 프레임을 구성하고,
- 하위 계층인 물리 계층에서 이러한 프레임을 아날로그 신호로 바꿔서 전송한다. 
```

<br />

#### 스위치(Switch)

- 이전 물리 계층에서 더미 허브의 단점을 보완해서 만든 것이 **스위치** 라고 했다.
- 스위치는 **데이터 링크 계층에서 동작**하며 `스위칭 허브`라고도 불린다.
- 스위치 내부에는 MAC 주소 테이블(MAC address table)이 존재한다.
  - MAC 주소 테이블은 **스위치의 포트 번호**와 스위치에 연결 되어있는 **컴퓨터의 MAC 주소가 등록**되어 있는 데이터 베이스이다.
  - 스위치 전원을 켰을 때 주소 테이블에는 등록되어있는 MAC 주소가 존재 하지 않는다. (❗️ 이때 MAC 주소 테이블에 도착지의 MAC 주소가 없기 때문에 허브와 같이 모든 포트에 데이터를 전달하는 `플러딩` 현상은 똑같이 발생한다. )
  - 목적지 MAC 주소가 추가 된 프레임이 전송되면 MAC 주소 테이블에 포트 번호와 함께 추가 된다.
  - 이미 등록되어 있는 MAC 주소라면 등록하지 않는데 이를 `MAC 주소 학습 기능`이라 한다.
- MAC 주소 테이블에 목적지의 MAC 주소만을 찾아 데이터를 전송하는 것을 `MAC 주소 필터링` 이라고 한다.
- 허브와는 다르게 스위치는 데이터 충돌은 발생하지 않는다. (이는 `스위치의 전이중 데이터 통신 방식`과 연결돼있다.)

<br />

#### 데이터 통신 방식

- 데이터 통신 방식에는 `전이중 통신 방식`과 `반이중 통신 방식` 2가지가 있다.
- 전이중 통신 방식 : 데이터의 송, 수신을 동시에 통신하는 방식이다. 그렇기 때문에 **데이터를 동시에 전송해도 충돌이 없다.**

  ![전이중](https://user-images.githubusercontent.com/61952198/184868767-83eaae04-456a-4c13-bc3f-63e6a617acaa.png)


- 반이중 통신 방식 : 회선 하나로 송신과 수신을 번갈아가면서 통신하는 방식이다. 허브 내부에는 송, 수신이 나누어져 있지 않기 때문에 **데이터를 동시에 전송하면 충돌이 있다.**

  ![반이중](https://user-images.githubusercontent.com/61952198/184868774-aed13c7f-068c-404d-8866-113a94e67eac.png)


- `스위치 (전이중 통신 방식)` : 스위치는 충돌이 발생하지 않는 구조로 되어있어 전이중 통신 방식으로 데이터를 주고 받는다.

  ![스위치-전이중](https://user-images.githubusercontent.com/61952198/184868783-63207362-71ca-43c3-a2ff-cd5d8e508bc2.png)


<br />

#### ARP(Address Resolution Protocol) 프로토콜

- ARP 프로토콜은 `목적지 컴퓨터의 IP 주소를 이용하여 MAC 주소를 찾기 위한 프로토콜` 이다.
- 데이터 링크 계층에서 이더넷 헤더가 붙은 프레임을 물리 계층으로 보내기 위해서는 목적지 MAC 주소를 지정해줘야한다.
- 이 다음으로 다뤄 볼 3계층 네트워크 계층은 `헤더에 IP 주소를 추가하여 데이터 링크 계층으로 보내`게 된다.
- 출발지 컴퓨터가 목적지 컴퓨터의 MAC 주소를 모른다면 이를 알아내기 위해서 네트워크 계층에서 넘어 온 IP 주소를 네트워크에 브로드캐스팅 하게 되는데 이를 `ARP 요청`이라고 한다.
  - 브로드캐스팅(Broadcasting) : 네트워크 상에 연결된 모든 컴퓨터들에게 요청하는 것을 의미한다.
- IP 주소를 가진 컴퓨터가 ARP 응답을 하게 되면 ARP 테이블(MAC 주소와 IP 주소의 매핑 정보)을 만들어 메모리에 보관한다.

<br />

### 3. 네트워크 계층(Network Layer)

```
서로 다른 네트워크에 있는 목적지로 데이터 전송을 가능하게 해준다.
```

- 데이터링크 계층에서 언급한 스위치 장비를 사용하게 되면 같은 네트워크에 있는 컴퓨터끼리 이더넷 규칙을 준수하며 프레임을 주고 받을 수 있었다.
- 하지만 이는 곧 스위치 너머의 ‘다른 네트워크에는 데이터를 전송할 수 없음’을 의미한다.

  ![네트워크 대역](https://user-images.githubusercontent.com/61952198/184868821-909a7630-f8b0-461a-9cca-dcf97ccc18b0.png)


- 다른 네트워크 간의 통신을 가능하게 해주는 것이 네트워크 계층이며 이때 `라우터`라는 장비를 활용하게 된다.

<br />

#### IP 주소

- 2계층 데이터 링크 계층에서는 데이터를 전송하기 위해서 목적지의 MAC 주소가 필요했던 것을 기억할 것이다.
- 3계층 네트워크 계층에서는 **네트워크를 식별할 수 있는 IP 주소**를 알아야하고 **라우터가 목적지까지 가는 최적의 경로**를 결정해야 하는데 목적지가 어디인지 모르면 목적지까지 가는 경로도 알지 못하게 된다.
- 이 때 `네트워크, 즉 목적지를 식별할 수 있는 주소`를 IP 주소라고 한다.
- 네트워크 계층에서는 캡슐화 과정에서 `IP 헤더`를 붙이게 된다.
  - 전송하려고 하는 데이터에 IP 헤더를 포함한 것을 `IP 패킷` 이라고 한다. (**IP 헤더에는 출발지 IP 주소와 목적지 IP 주소가 담겨있다**.)

    ![ip패킷](https://user-images.githubusercontent.com/61952198/184868827-d6817d7a-0832-4ab1-ad1a-6017b18778bb.png)


  - IP 주소는 ISP (Internet Service Provider, 인터넷 서비스 제공자) 에서 제공한다.
    - ISP : KT, U+, SK 브로드밴드 등과 같이 인터넷을 사용하려고 신청한 통신사를 의미한다.

<br />

#### 라우터

- 위에서 언급 했던 것처럼 라우터는 서로 다른 네트워크간 통신할 수 있도록 해주며 네트워크를 분리할 수 있다.

  ![라우터](https://user-images.githubusercontent.com/61952198/184868851-be9e9202-9672-480b-a5eb-a78f5d72c43b.png)


- 3계층 네트워크 계층에서는 **네트워크를 식별할 수 있는 IP 주소**를 알아야하고 **목적지까지 가는 최적의 경로**를 결정해야하는데 이를 `라우팅`이라고 한다.
- 라우터에는 `라우팅 테이블`이 존재하여 경로 정보를 등록하고 관리한다.
- 컴퓨터 한 대가 다른 네트워크에 데이터를 전송하려면 어떻게 해야 할까?
  - 라우터의 IP 주소를 설정 해야하는데, 이는 곧 네트워크 출입구를 설정하는 `기본 게이트웨이`를 설정하는 것과 같다.
  - 라우터의 IP 주소를 설정하는 이유는 컴퓨터 한 대가 데이터를 어디로 전송해야 하는지 바로 알지 못하기 때문에 네트워크의 출입구를 설정하고, 일단은 데이터를 라우터에게 전송하기 위함이다.

<br />

### 4. 전송 계층(Transport Layer)

```
목적지에 데이터가 제대로 도착했는지 확인하고 목적지가 어떤 애플리케이션인지 구분한다.
```

- 이전까지 살펴본 물리 계층, 데이터 링크 계층, 네트워크 계층으로 인해 목적지에 데이터를 보낼 수 있다.
- 하지만 데이터를 전달만 할 수 있을 뿐이다.
  - 수신자가 패킷을 받을 준비가 됐는지,
  - 데이터 전송과정에서 패킷이 손상되거나 유실되었는지등을 알 수는 없다.
- 이렇듯 패킷이 제대로 수신지에 도착하도록 `패킷 전송을 제어하는 역할`을 전송 계층에서 담당한다. (패킷 흐름제어, 오류 제어 등)

```
💡 다시 한번 정리하면,
  - 네트워크 계층: 데이터 전달
  - 전송 계층: 데이터가 제대로 도착했는지 확인
```

<br />

#### 연결형 통신(TCP)과 비연결형 통신(UDP)

```
연결형 통신과 비연결형 통신은 신뢰성/정확성 과 효율성에서 차이가 있다.

- 신뢰성/정확성: 데이터를 목적지에 문제없이 전달하는 것을 말한다.
- 효율성: 데이터를 빠르고 효율적이게 전달하는 것을 말한다.
```

![연결형_비연결형](https://user-images.githubusercontent.com/61952198/184868899-9ac1c19a-df2b-4fbf-b494-f1d10f632482.jpeg)


- `연결형 통신(TCP)` : 신뢰성과 정확성이 우선시된다.
  - 전송 계층에서는 `TCP 헤더` 를 붙이고 TCP 헤더와 데이터를 합친 것을 `세그먼트` 라 부른다. (❗️`데이터링크 계층`에서는 `이더넷 헤더와 데이터`를 합쳐 `프레임`이라 불렀고, **네트워크 계층**에서는 `IP 헤더와 데이터`를 합쳐 `패킷`이라고 불렀던 것을 기억하자)
  - TCP 헤더는 검증 절차와 관련된 정보들이 많기 때문에 UDP보다 복잡하다.
  - 신뢰성이 필요한 이메일이나 파일전송에 쓰이며 속도는 느리다.
  - 출발지 포트번호와 목적지 포트번호가 존재한다.
  - TCP 프로토콜은 데이터 송수신 전에 3-way handshake를 통해 기종간의 연결이 잘 됐는지 먼저 확인한다.

    ![3-way-handshake](https://user-images.githubusercontent.com/61952198/184868906-f3f0f659-1ae7-4ae7-b733-a85b55bf09ad.png)


      ```
      1. 통신을 위해서는 컴퓨터2에게 허가를 받아야 하기때문에 컴퓨터1에서 연결 확립 허가를 받기 위한 요청(SYN)를 보낸다.
      2. 컴퓨터2는 컴퓨터1이 보낸 요청을 받은 후에 허가한다는 응답을 회신하기 위해 연결 확립 응답(ACK)를 보내고 동시에 컴퓨터1에게 데이터 전송 허가를 받기 위해 연결 확립 요청(SYN)를 보낸다.
      3. 컴퓨터1은 컴퓨터2로 허가한다는 응답으로 연결 확립 응답(ACK)을 보낸다.
      ```

  - 연결을 끊을 때는 4-way handshake를 이용한다.

    ![4-way-handshake](https://user-images.githubusercontent.com/61952198/184868914-54dc8766-0fe0-4ce4-8e10-e599c703725c.png)


      ```
      1. 컴퓨터 1에서 컴퓨터 2로 연결 종료 요청(FIN)을 보낸다.
      2. 컴퓨터 2에서 컴퓨터 1로 연결 종료 응답(ACK)을 반환한다.
      3. 또한 컴퓨터 2에서도 컴퓨터 1로 연결 종료 요청(FIN)을 보낸다.
      4. 컴퓨터 1에서 컴퓨터 2로 연결 종료 응답(ACK)을 반환한다.
      ```

- `비연결형 통신(UDP)` : 효율성이 우선시된다.
  - 수신측에서 데이터를 제대로 받았는지는 신경쓰지 않고 빠르게 데이터를 보내는데 중점을 둔다.
  - `UDP 헤더`가 붙은 데이터를 `UDP 데이터 그램`이라고 한다.
  - UDP는 확인 응답을 받지 않기 때문에 같은 랜에 있는 네트워크 장비에 **브로드캐스트**와 같이 불특정 다수에게 데이터를 일괄로 보낼 수 있다.

<br />

####  포트 번호 (Port Number)

- 전송된 데이터가 어떤 애플리케이션인지 구분하는데 있어 `포트 번호` 를 이용한다.
  - `어떤 컴퓨터로 전송하는지 알기 위해서`는 `IP 주소`가 필요하고 `어떤 애플리케이션으로 전송하는지 알기 위해서`는 `포트 번호`가 필요하다.

    ```
    예를들어,
    
    교실 = IP 주소
    해당 교실의 특정 사람 = 포트 번호
    ```

- TCP 헤더에는 출발지 포트 번호와 목적지 포트 번호가 존재한다고 했다.
- 0~1023번 포트까지는 `잘 알려진 포트(well-known port)` 이며 HTTP(웹), FTP(파일 전송), SMTP(이메일 전송) 등과 같이 인터넷에서 널리 사용되는 서버 애플리케이션이 사용한다.
- 1024번은 예약은 되어 있지만 사용하지 않는 포트이며 1025번 이상부터는 랜덤 포트라고 부른다.

| 애플리케이션 | 포트 번호 |
| --- | --- |
| SSH | 22 |
| SMTP | 25 |
| DNS | 53 |
| HTTP | 80 |
| POP3 | 110 |
| HTTPS | 443 |

<br />

---

```
물리계층(1계층) ~ 전송계층(4계층)의 주된 기능은 데이터를 전달하는 것이었다.
세션계층(5계층) ~ 응용계층(7계층)의 주된 기능은 컴퓨터 내의 프로세스들에의해 데이터를 만드는 작업이다.

❗️ OSI 7계층에서는 5,6,7 계층으로 나눠져 있으나 TCP/IP 계층에서는 5,6,7계층을 Application Layer 하나의 계층으로 설계 한다.
```

---

<br />

### 5. 세션 계층(Session Layer)

```
응용 시스템 간의 세션을 관리한다.
```

- 세션 계층에는 `동기화`라는 기능이 존재한다.
  - `체크포인트` 라는 것으로 동기화를 진행하며 체크포인트를 활용하여 오류 복구를 할 수 있다.
  - `오류 복구` : 특정 지점에서 송, 수신 오류가 발생한다면 이전에 통신이 완벽했던 지점(체크포인트) 부터 다시 데이터를 재전송한다.
- 대표적인 프로토콜/기술들은 SSH, TLS 등이 있다.
- 통신장치 간의 통신 방식을 결정 할 수 있으며 종류는 3가지가 있다.
  - 전이중 방식 (Full duplex) : 양방향 통신 방식으로 송신선과 수신선이 각각 존재하여 양쪽이 동시에 통신할 수 있는 방식이다.
  - 반이중 방식 (Half duplex) : 양방향 통신 방식이지만 회선 하나로 송신과 수신을 번갈아가면서 통신하는 방식이다.
  - 단방향 방식 (Simplex) : 한쪽에서만 데이터를 전송하는 방식이다.

<br />

### 6. 표현 계층(Presentation Layer)

```
애플리케이션이 다루는 정보를 통신에 알맞은 형태로 만들거나, 하위 계층에서 온 데이터를 사용자가 이해할 수 있는 형태로 만든다.
```

- 표현 계층에서는 데이터를 다른 장치 모두가 이해할 수 있도록 번역을 한다.
  - 예를들어, 데이터 형식이 EBCDIC이고 크기가 5MB라고 가정한다면, 이 데이터를 ASCII 형식으로 번역하여 크기를 줄이고 응용 계층이 이해할 수 있도록 만든다.
- 데이터를 안전하게 전송하기 위해 암호화와 복호화 작업도 수행한다.
- 대표적인 프로토콜로 SSL, JPEG, MPEG, ASCII, EBCDIC 등이 있습니다.

<br />

### 7. 응용 계층(Application Layer)

```
사용자에게 인터페이스를 제공하여 사용자가 네트워크에 접근할 수 있도록 도와준다.
```

- 대표적인 프로토콜로 HTTP, HTTPS, FTP, Telnet, DNS 등이 있다.
- 응용 프로세스 간의 정보 교환, 파일 전송 등의 서비스를 제공한다.
- 우리가 사용하는 크롬 웹 브라우저, 메신저 등이 7계층에 해당하는 프로토콜을 보다 쉽게 사용하게 해주는 응용 프로그램이다.

<br />

### Reference

---

- [OSI 7계층](https://dncjf64.tistory.com/379)
- [모두의 네트워크](http://www.yes24.com/Product/Goods/61794014?OzSrank=1)
- [네트워크 기초 - OSI 7계층](https://losskatsu.github.io/os-kernel/network-basic03/#41-%EB%A7%A5-%EC%A3%BC%EC%86%8C-%ED%85%8C%EC%9D%B4%EB%B8%94)
- [네트워크 기초지식](https://velog.io/@april_5/%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC%EC%9D%98-%EA%B5%AC%EC%84%B1)
- [[10분 테코톡] 🔮 히히의 OSI 7 Layer](https://www.youtube.com/watch?v=1pfTxp25MA8&feature=youtu.be)
