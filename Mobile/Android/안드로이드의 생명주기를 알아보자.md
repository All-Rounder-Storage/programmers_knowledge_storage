## 안드로이드의 생명주기를 알아보자

## 공부하게 된 이유
- 지난 주 내용(안드로이드의 4대 컴포넌트를 알아보자)과 마찬가지로 안드로이드 개발에서 필수로 알고 있어야 하는 내용입니다.
- 안드로이드는 생명주기에 따라 처리해줘야 하는 기능들이 발생할 때가 있기에 개념 인지가 필수적입니다.

## 안드로이드의 생명주기(lifeCycle) 이란  ?
- 사용자가 앱에서 탐색하고, 앱에서 나가고, 다시 앱으로 들어오고 하는 과정이 생명주기 안에서 callback 을 제공합니다.
  - 해당 시점에 대한 메서드에서 개발자는 처리해야 할 로직을 작성할 수 있습니다.
- 해당하는 생명 주기에 기본적으로 처리되어야 할 로직들은 종속 되어있습니다. (꼭 해당하는 수명 주기 내에서 처리해야 합니다.)

## 1. 가장 먼저 사용자와 상호 작용 하는 Activity 의 생명 주기를 알아 봅시다.
- Activity 는 총 **6개** 의 생명 주기를 가집니다.

```markdown
**onCreate(savedInstanceState: Bundle?) 상태 값 표현 : 생성됨**
- Activity 가 시스템에 의해 실행된 후 **첫번째**로 호출되며 **한번**만 호출 됩니다.
- Activity 의 전체 생명 주기에서 **한번만 실행되어야 하는 로직**들을 이부분에서 처리 합니다.
    + UI, data 와의 binding, viewModel 과의 연결 등을 처리 합니다.
- savedInstanceState 매개변수를 수신하여 이전에 존재한 동일한 Activity 저장 상태를 받습니다.
  (주로 화면 전환 시 생명 주기가 다시 생성될 때 이전의 값들을 잃지 않기 위해 사용했으나,
  viewModel 이 생겨나면서 필수적으로 사용하는 요소에서 거리가 멀어졌습니다.)
- **생성됨** 상태가 되었다가 메서드가 실행을 완료하면 **시작됨** 상태가 됩니다.
- 모든 동작이 마무리 되면 onStart() 메서드가 호출 됩니다.
```

```markdown
**onStart() 상태 값 표현 : 시작됨**
- Activity 가 사용자에게 표시되는 시점 입니다.
- 앱에서는 Activity 를 foreground 로 보내 사용자와 상호작용 가능하도록 준비 합니다.
- 해당 부분에서는 UI를 관리하는 로직들을 초기화 합니다.
- 메서드가 실행을 완료하면 **시작됨** 에서 **재개됨** 상태로 변경 됩니다.
- 모든 동작이 마무리 되면 onResume() 메서드가 호출 됩니다.
```

```markdown
**onResume() 상태 값 표현 : 재개됨**
- 사용자와 상호작용 할 수 있는 상태 입니다.
- 사용자에게 보이는 동안 동작해야하는 기능을 활성화 할 수 있습니다.(카메라 미리보기 등)
- 주기적인 업데이트가 필요한 비즈니스 로직을 해당 메서드에서 처리할 수 있습니다.(은행 계좌 잔고 표시 등)
- 이벤트가 발생하여 앱에서 포커스가 떠날 때까지 **현재 Activity 에서 포커스가 떠날 때 까지 현 상태**에 머무릅니다.
- 포커스가 떠난다의 예시에는, 다른 앱 화면으로 이동하거나, 전화를 받거나, 기기 화면이 꺼지거나, 다른 Activity 가 해당하는 Activity 위에 올라왔을 경우 등이 존재 합니다.
- 위처럼 다른 이벤트가 생겼을 경우 **일시중지됨** 상태에 들어 가고 onPause() 메서드가 호출 됩니다.
```

```markdown
**onPause() 상태 값 표현 : 일시중지됨**
- 사용자가 Activity 를 떠났다는 것을 나타내는 첫번째 메서드 입니다.
- 사용자가 떠났지만 Activity 의 소멸을 뜻하진 않으며, **활동이 foreground 상태가 아님**을 말합니다.
- 멀티 윈도우 모드에서는 화면에 보이고 있을수도 있습니다.
- Activity 가 이 상태에 접어들 때에의 예로는 **다른 이벤트들이 앱의 실행을 방해**할 때 발생합니다.
- Activity 내에서 팝업 화면이 위로 올라왔을 경우에도 onStop() 메서드가 호출 됩니다.
- 사용자가 필요로 하지 않는 **리소스에 대한 해제 처리를 진행** 할 수 있습니다. ex) GPS 등
- 해당 상태는 **짧게 실행** 되기 때문에 서버로의 저장 작업 혹은 내장 DB 데이터 저장 등은 해서는 안됩니다.
- 이 상태에서 사용자에게 **화면이 다시 보이게 될 경우("재개됨") onResume()을 호출** 합니다.
- 이 상태에서 사용자에게 **화면이 더이상 보이지 않게 될 경우 onStop() 을 호출** 합니다.
```

```markdown
**onStop() 상태 값 표현 : 중단됨**
- **Activity 가 사용자에게 더 이상 나타나지 않을 경우** 해당 메서드가 호출 됩니다.
- 새로 시작된 **Activity 가 화면 전체를 차지할 경우**에 이전 Activity 가 해당 상태에 접어 듭니다.
- 이 상태에서 화면에 보이지 않을 때 **실행할 필요가 없는 모든 기능을 정지**할 수 있습니다. ex) 애니메이션 중지, 위치 업데이트 정밀도 변경 등
- CPU 를 비교적 많이 소모하는 종료 작업을 이 시점에 실행 할 수 있습니다. ex) 데이터베이스 저장
- **메모리에는 남아 있는 상태를 유지**하기에, 다시 시작될 경우에는 onRestart() 를 호출하고, 
  실행을 종료할 경우에는 onDestroy() 가 호출 됩니다.
- 앱 실행에 있어서 메모리가 부족할 경우, 시스템에서 종료가 가능할 수도 있습니다. (프로세스 자체 종료)
```
```markdown
**onDestroy() 상태 값 표현 : 소멸 됨**
- Activity 가 소멸되기 전에 호출 됩니다.
- 사용자가 해당 Activity 를 완전히 닫거나, 개발자가 코드 적으로 finish() 를 호출하게 했을 경우 해당 메서드가 호출 됩니다.
- 수명 주기의 마지막 callback 이기 때문에 onStop()에서 하지 못한 리소스 해제 등을 처리 해야 합니다.
```

![activity_lifecycle](https://user-images.githubusercontent.com/49216939/174612265-8ef89893-ad67-4740-9dee-6d143ea7ad40.png)


## 2. Activity 위에서만 실행이 가능한 Fragment 의 생명 주기를 알아보자

