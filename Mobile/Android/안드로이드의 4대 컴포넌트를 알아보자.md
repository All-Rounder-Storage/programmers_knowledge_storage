# 안드로이드의 4대 컴포넌트를 알아보자

## 공부하게 된 이유
- 안드로이드의 기본이며, 매우 중요한 내용이지만 간과하기 때문이다.
- 결국 문제가 발생하는건 기본적인 내용의 숙지가 덜 된 부분에서 발생하는 일이 잦다.
- 이번 기회에 내용을 정리하고 인지하고자 공부한다.

## 4대 컴포넌트란 ? -> Activity, Service, BroadcastReceiver, ContentProvider 
- 안드로이드 어플리케이션을 구성하는 기본 구성 요소이다.
- 각 컴포넌트를 통해 시스템이나, 사용자가 앱에 들어 올 수 있는 진입점의 역할을 한다.
- 각 컴포넌트들은 각자의 **생명주기**를 가진다. (중요)

## Activity
- 사용자 인터페이스를 포함한 화면 하나를 나타낸다. 안드로이드에서는 화면 하나가 단위가 될 수 있다.
- 사용자와의 상호작용 및 액티비티를 호스팅 하는 프로세스가 시스템에서 실행 될 수 있도록 한다.
- ex) 채팅 앱 - 채팅 Activity, 채팅 리스트 Activity, 친구 프로필 Activity 등

## Service
- **백그라운드에서 실행되는 구성요소**로, 여러가지 이유로 백그라운드에서 앱을 계속 실행할 필요가 있을 때 사용하는 컴포넌트 이다.
- 백그라운드에서 실행되는 요소이기 때문에 **UI를 가지지 않는다**.
- 다른 컴포넌트와 사용자의 상호작용을 차단하지 않은 채로 동작 할 수 있다 (ex. 음악 재생, 캐시 데이터 업로드 등)
- 시작된 서비스는 작업이 완료될 때까지 서비스를 실행하라고 OS에 지시 합니다.
- 다른 구성요소가 실행되도록 두거나, 자신에게 바인딩 하여 동작하게 할 수 있습니다.

## BroadcastReceiver
- 현재 앱의 외부에서 일어나는 이벤트를 전달하도록 지원하는 구성요소 입니다.
- 시스템 전체의 브로드캐스트 알림에 반응하고, 앱으로 전달할 수 있게 합니다.
- 예시로는 문자 알림, 배터리 부족 알림, 사진 캡처 알림 등 이 있습니다.
- 사용자 인터페이스를 표시하지는 않으나, 상단표시줄(상단바)에 노티를 띄워 동작함을 알릴 수 있습니다.
- 각 브로드 캐스트는 **Intent** 로 전달 됩니다.
- 정적 리시버와 동적 리시버로 나뉘어집니다.
    + 정적 리시버 : Manifest.xml 이라는 설정 앱에 작성하여 리시버를 구현하는 형태, 첫 등록 후 해제 불가하다. 
      동적 리시버 : 필요로 하는 클래스에서 코드로 구현하여 리시버를 동작 시키고, 원하는 시점에 해지 처리 하며 사용 가능 하다.

## ContentProvider
- 파일 시스템, 내장 데이터베이스 등 앱이 접근 가능한 다른 영구 저장 위치에 저장 가능한 앱 데이터의 공유형 관리 집합을 관리합니다.
- 적절한 권한을 취득 후 내장 DB에 수정을 하거나, APK 다운로드 및 설치, 사용자 연락처 정보, 갤러리 접근 등을 수행 할 수 있다.
- 기본적으로 앱 전용이기에 공유 되지 않는 데이터를 read/write 하는데 유용 합니다.

## 4대 컴포넌트에 포함이 되진 않지만 안드로이드의 중요한 개념

## Activity, Service, BroadcastReceiver 가 소통하는 방법은 ? -> Intent
- 명시적 인텐트와 암시적 인텐트로 나뉘어집니다.
    + 명시적 인텐트 : 앱의 화면전환을 하는 방법(채팅 목록에서 채팅 리스트 클릭 -> 채팅 창 화면) 웹에서는 route 라고 이야기 하는 부분과 동일하다고 볼 수 있다. 
      암시적 인텐트 : 지정한 Action 에 따라 해당하는 어플리케이션의 클래스를 호출 합니다. ex) 웹브라우저 새 창으로 호출, 전화 앱으로 통화 등
- 데이터를 주고 받을 수 있습니다. (간단한 데이터를 주고 받는 것이 원칙 입니다.)
- PendingIntent 를 통해서 사용자가 어떠한 작업 수행 시 실행되도록 만들 수 있습니다.
    + ex) 푸쉬 알림을 눌러서 앱 실행, 앱의 특정 화면으로 이동 등 
      PendingIntent 를 통해서 푸쉬 알림으로 날아온 정보를 Activity 로 넘겨줄 수 있기 때문입니다. 
      이 외에 다른 구성요소도 실행 시킬 수 있고, 데이터를 전달 할 수 있습니다.
    
## Activity 와 함께 화면을 구성하는 컴포넌트 -> Fragment
- 다양한 단말의 크기, 복잡한 레이아웃 구성을 Activity 하나로 모두 구현하기엔 버겁기에 이를 보완하기 위해 나온 컴포넌트 이다.
- Activity 위에서만 생성될 수 있고, 혼자서 **하나의 화면을 구현할 수는 없다**.
- Activity 가 가진 데이터들을 사용할 수 있다.
- Activity 가 출력하는 한 화면을 Fragment 로 대체하여 구현할 수 있다.
    + 이로써 얻는 장점은 한 Activity 로 여러 화면을 구현할 수 있기에 앱이 가벼워지고 코드의 재 사용성이 높아진다.
- 예시로는 하단 네비게이션 메뉴들에 해당하는 화면, 화면 내에서 탭으로 이뤄진 구조의 탭 내 화면 등 이 있다.
- 복잡한 앱일 수록 모두 Activity 로 구현하는 것에는 한계가 있기 때문에 Fragment 를 사용해서 따로 구현하는 경우가 많다.